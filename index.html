<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Movie App - Astra DB</title>

    <style>
      body { margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; }
      .app { display: grid; grid-template-columns: 320px 1fr; min-height: 100vh; }
      .sidebar { padding: 16px; border-right: 1px solid #ddd; background: #f9fafb; }
      .main { padding: 16px; }
      .label { display:block; margin-top: 12px; font-size: 13px; color:#333; }
      .button { width:100%; margin-top: 12px; padding: 10px; border-radius: 10px; border: 1px solid #222; background:#222; color:white; cursor:pointer; }
      .button.secondary { background:white; color:#222; }
      .status { margin-top: 12px; font-size: 12px; color:#666; line-height: 1.3; }
      .badge { display: inline-block; padding: 2px 8px; background: #6366f1; color: white; font-size: 11px; border-radius: 4px; margin-left: 8px; }

      /* Unified search input with chips */
      .searchBox { margin-top: 6px; border:1px solid #ccc; border-radius: 12px; padding: 8px; background: white; }
      .chips { display:flex; flex-wrap:wrap; gap:6px; margin-bottom:6px; }
      .chip {
        display:inline-flex; gap:6px; align-items:center;
        padding: 4px 8px; border:1px solid #ddd; border-radius: 999px;
        font-size: 12px; background:#f7f7f7;
      }
      .chip button { border:none; background:transparent; cursor:pointer; font-size: 14px; line-height: 1; }
      .chipType { font-size: 11px; color:#777; }
      .inputInline { border:none; outline:none; width: 100%; padding: 6px; box-sizing: border-box; font-size: 14px; }

      /* Autocomplete suggestions */
      .results { margin-top: 6px; border:1px solid #ddd; border-radius: 10px; overflow:hidden; background: white; }
      .resultItem {
        padding: 8px 10px; cursor:pointer; border-bottom:1px solid #eee;
        display:flex; justify-content:space-between; gap:10px; align-items:center;
      }
      .resultItem:last-child { border-bottom:none; }
      .resultItem:hover, .resultItem.selected { background:#f6f6f6; }
      .suggestionType { font-size: 11px; color:#777; white-space: nowrap; }

      /* Grid */
      .grid { display:grid; grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); gap: 12px; margin-top: 12px; }
      .card { border: 1px solid #ddd; border-radius: 10px; padding: 8px; cursor: pointer; transition: transform 0.2s; }
      .card:hover { background:#fafafa; transform: translateY(-2px); }
      img { width: 100%; border-radius: 8px; display:block; }
      .movieTitle { font-size: 14px; margin-top: 8px; font-weight: 500; }
      .meta { font-size: 12px; color:#666; margin-top: 4px; }
      .noposter { height: 240px; display:grid; place-items:center; background:#f3f3f3; border-radius: 8px; color:#666; }

      /* Modal */
      .modalOverlay {
        position: fixed; inset: 0; background: rgba(0,0,0,0.55);
        display: none; align-items: center; justify-content: center;
        padding: 24px; z-index: 1000;
      }
      .modalOverlay.open { display: flex; }
      .modal {
        background: #fff; border-radius: 16px; max-width: 900px; width: 100%;
        max-height: 90vh; overflow: auto; border: 1px solid #ddd;
      }
      .modalHeader {
        display:flex; justify-content: space-between; align-items:flex-start;
        padding: 16px 16px 0 16px;
      }
      .modalClose {
        border:1px solid #ddd; background:#fff; border-radius: 10px; padding: 8px 10px;
        cursor:pointer;
      }
      .modalBody { padding: 16px; display:grid; grid-template-columns: 220px 1fr; gap: 16px; }
      .poster { width: 220px; }
      .poster img { border-radius: 12px; }
      .pillRow { display:flex; flex-wrap: wrap; gap: 8px; margin-top: 10px; }
      .pill {
        display:inline-flex; align-items:center; gap:6px;
        border:1px solid #ddd; border-radius:999px; padding: 6px 10px;
        font-size: 12px; cursor: pointer; background: #f8f8f8;
      }
      .pill:hover { background:#f0f0f0; }
      .provider-nav-pill { font-size: 11px; padding: 4px 8px; }
      .cast-link:hover { text-decoration: underline; }
      .sectionTitle { margin-top: 14px; font-size: 13px; color:#444; font-weight: 600; }
      .overview { margin-top: 8px; line-height: 1.35; color:#222; }
      .subtle { color:#666; font-size: 12px; margin-top: 6px; }
      .modalSimilarBtn {
        display: inline-flex; align-items: center; gap: 6px;
        padding: 8px 14px; border: 1px solid #6366f1; background: #6366f1;
        color: white; border-radius: 8px; cursor: pointer;
        font-size: 13px; margin-top: 14px;
      }
      .modalSimilarBtn:hover { background: #4f46e5; }
      @media (max-width: 800px) {
        .app { grid-template-columns: 1fr; }
        .sidebar { border-right: none; border-bottom: 1px solid #ddd; }
        .modalBody { grid-template-columns: 1fr; }
        .poster { width: 100%; max-width: 300px; }
      }
    </style>
  </head>

  <body>
    <div class="app">
      <aside class="sidebar">
        <h1>Movies <span class="badge">Astra DB</span></h1>

        <label class="label">Vector Search</label>
        <div class="searchBox">
          <div id="chips" class="chips"></div>
          <input
            id="searchInput"
            class="inputInline"
            placeholder="Search actors, genres, keywords…"
            autocomplete="off"
          />
        </div>

        <div id="suggestions" class="results" style="display:none;"></div>

        <label class="label">Where to Watch</label>
        <div id="providers" class="pillRow"></div>

        <button id="clear" class="button secondary">Clear Filters</button>
        <div id="status" class="status"></div>
      </aside>

      <main class="main">
        <h2 class="title">Results</h2>
        <div id="output">Loading…</div>
      </main>
    </div>

    <!-- Modal -->
    <div id="modalOverlay" class="modalOverlay" aria-hidden="true">
      <div class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
        <div class="modalHeader">
          <div>
            <h2 id="modalTitle" style="margin:0;">Movie</h2>
            <div id="modalSubtitle" class="subtle"></div>
          </div>
          <button id="modalClose" class="modalClose" type="button">Close</button>
        </div>
        <div id="modalBody" class="modalBody"></div>
      </div>
    </div>

    <script type="module" src="/main.js"></script>
  </body>
</html>
